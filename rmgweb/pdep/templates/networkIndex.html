{% extends "pdepbase.html" %}

{% block title %}{{ network.title }}{% endblock %}

{% block navbar_items %}
<a href="{% url pdep.views.index %}">MEASURE</a> &raquo;
<a href="{% url pdep.views.networkIndex networkKey=networkKey%}">{{ network.title }}</a>
{% endblock %}

{% block sidebar_items %}
{% include "networkSidebar.html" %}
{% endblock %}

{% block page_title %}{{ network.title }}{% endblock %}

{% block page_body %}

{% if not network.inputFileExists %}

<div class="messagebox">
<p class="bigmessage">No input has been provided for this network.</p>
<p>You can add input by using
<a href="{% url pdep.views.networkEditor networkKey=networkKey%}">the editor</a>, or by
<a href="{% url pdep.views.networkUpload networkKey=networkKey%}">uploading a file</a>.
</p>
</div>

{% else %}

{% if errorString != '' %}
<div class="warning">
<p class="bigmessage">One or more errors exists in your input file.</p>
<p>The error messages are shown below:
</p>
<p>
<textarea style="width: 90%; height: 20em; border: 1px solid #E0C0C0; background-color: inherit">
{{ errorString }}
</textarea>
</p>
<p>To fix these errors, use
<a href="{% url pdep.views.networkEditor networkKey=networkKey%}">the editor</a>, or
<a href="{% url pdep.views.networkUpload networkKey=networkKey%}">upload a new file</a>.
</p>
</div>
{% endif %}

<h2>Potential Energy Surface</h2>
{% if network.surfaceFilePNGExists %}
{% if network.surfaceFilePNGOutOfDate %}
<div class="warning">
<strong>Warning:</strong> Your potential energy surface may be out of date. You may want to <a href="{% url pdep.views.networkDrawPNG networkKey=networkKey %}">redraw it</a>.
</div>
{% endif %}
<p style="text-align: center;">
<a href="/media/pdep/networks/{{ networkKey }}/PES.png"><img src="/media/pdep/networks/{{ networkKey }}/PES.png"/></a>
</p>
{% else %}
<div class="messagebox">
<p class="bigmessage">No potential energy surface has been drawn for this network.</p>
<p>To visualize your potential energy surface, <a href="{% url pdep.views.networkDrawPNG networkKey=networkKey %}">click here</a>.
</p>
</div>
{% endif %}

{% if network.inputFileExists %}
<h2>Species</h2>
<p>
<form action="" method="POST">{% csrf_token %}
<table class="networkData">
<tr>
    <th>Label</th>
    <th>Structure</th>
    <th>Type</th>
    <th>Collision model?</th>
    <th>Frequencies?</th>
    <th>Thermodynamics?</th>
    <th></th>
</tr>
{% for label, structure, type, collision, states, thermo in speciesList %}
<tr>
    <td><a href="{% url pdep.views.networkSpecies networkKey=networkKey species=label %}">{{ label }}</a></td>
    <td>{{ structure|safe }}</td>
    <td>{{ type }}</td>
    <td>{{ collision }}</td>
    <td>{{ states }}</td>
    <td>{{ thermo }}</td>
    <td><input type="submit" value="Delete" id="submit" name="delete_species_{{ forloop.counter }}"/></td>
</tr>
{% endfor %}
</table>
<br/>
<input type="submit" value="Add species" id="submit" name="add_species"/>
</form>
</p>

<h2>Path Reactions</h2>
<p>
<form action="" method="POST">{% csrf_token %}
<table class="networkData">
<tr>
    <th>Index</th>
    <th colspan="3">Path reaction</th>
    <th>Transition state?</th>
    <th>High-P kinetics?</th>
    <th></th>
</tr>
{% for reactants, arrow, products, states, kinetics in pathReactionList %}
<tr>
    <td><a href="{% url pdep.views.networkPathReaction networkKey=networkKey reaction=forloop.counter %}">{{ forloop.counter }}.</a></td>
    <td class="reactants">{{ reactants|safe }}</td>
    <td class="reactionArrow">{{ arrow|safe }}</td>
    <td class="products">{{ products|safe }}</td>
    <td>{{ states }}</td>
    <td>{{ kinetics }}</td>
    <td><input type="submit" value="Delete" id="submit" name="delete_path_reaction_{{ forloop.counter }}"/></td>
</tr>
{% endfor %}
</table>
<br/>
<input type="submit" value="Add path reactions" id="submit" name="add_path_reactions"/>
</form>
</p>

{% endif %}

{% if network.outputFileExists %}
<h2>Net Reactions</h2>
<p>
<table class="networkData">
<tr>
    <th>Index</th>
    <th colspan="3">Net reaction</th>
    <th>Kinetics?</th>
</tr>
{% for reactants, arrow, products, kinetics in netReactionList %}
<tr>
    <td><a href="{% url pdep.views.networkNetReaction networkKey=networkKey reaction=forloop.counter %}">{{ forloop.counter }}.</a></td>
    <td class="reactants">{{ reactants|safe }}</td>
    <td class="reactionArrow">{{ arrow|safe }}</td>
    <td class="products">{{ products|safe }}</td>
    <td>{{ kinetics }}</td>
</tr>
{% endfor %}
</table>
</p>

{% endif %}

<h2>Files</h2>

{% if network.inputFileExists %}
{% include "networkFile.html" with filename="input.py" filesize=filesize.inputFile modificationTime=modificationTime.inputFile icon="/media/icons/text-x-python.png" %}
<br/>
{% endif %}

{% if network.outputFileExists %}
{% include "networkFile.html" with filename="output.py" filesize=filesize.outputFile modificationTime=modificationTime.outputFile icon="/media/icons/text-x-python.png" %}
<br/>
{% endif %}
{% if network.logFileExists %}
{% include "networkFile.html" with filename="MEASURE.log" filesize=filesize.logFile modificationTime=modificationTime.logFile icon="/media/icons/text-x-generic.png" %}
<br/>
{% endif %}

{% if network.surfaceFilePNGExists %}
{% include "networkFile.html" with filename="PES.png" filesize=filesize.surfaceFilePNG modificationTime=modificationTime.surfaceFilePNG icon="/media/icons/image-x-generic.png" %}
<br/>
{% endif %}
{% if network.surfaceFilePDFExists %}
{% include "networkFile.html" with filename="PES.pdf" filesize=filesize.surfaceFilePDF modificationTime=modificationTime.surfaceFilePDF icon="/media/icons/application-pdf.png" %}
<br/>
{% endif %}
{% if network.surfaceFileSVGExists %}
{% include "networkFile.html" with filename="PES.svg" filesize=filesize.surfaceFileSVG modificationTime=modificationTime.surfaceFileSVG icon="/media/icons/image-svg+xml.png" %}
<br/>
{% endif %}

{% endif %}

{% endblock %}
